<!DOCTYPE html>
<html lang="te">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞ï‡∞æ‡∞≤‡∞ø‡∞ï‡±ç‡∞Ø‡±Å‡∞≤‡±á‡∞ü‡∞∞‡±ç (Village Style)</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Telugu:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans Telugu', sans-serif;
            background-color: #f0f9ff;
        }
        input[type="date"] {
            -webkit-appearance: none;
            position: relative;
        }
        /* Hide number input arrows */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen py-8 text-gray-800">

    <!-- App Header -->
    <div class="w-full max-w-md px-4 mb-6 text-center">
        <div class="bg-blue-700 text-white p-4 rounded-2xl shadow-lg flex items-center justify-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
            <h1 class="text-2xl font-bold">‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞ï‡∞æ‡∞≤‡∞ø‡∞ï‡±ç‡∞Ø‡±Å‡∞≤‡±á‡∞ü‡∞∞‡±ç</h1>
        </div>
        <p class="text-gray-500 text-sm mt-2 font-medium">‡∞ó‡±ç‡∞∞‡∞æ‡∞Æ‡±Ä‡∞£ ‡∞™‡∞¶‡±ç‡∞ß‡∞§‡∞ø‡∞≤‡±ã (‡∞§‡±á‡∞¶‡±Ä‡∞≤ ‡∞™‡±ç‡∞∞‡∞ï‡∞æ‡∞∞‡∞Ç) ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞≤‡±Å</p>
    </div>

    <!-- Main Card -->
    <div class="w-full max-w-md bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100 p-6 space-y-6">
        
        <!-- Toggle Button -->
        <div class="flex bg-gray-100 p-1 rounded-xl">
            <button id="btnSimple" onclick="setInterestType('simple')" class="flex-1 py-3 px-4 rounded-lg text-sm font-bold transition-all duration-200 bg-white text-blue-700 shadow-md">
                ‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£ ‡∞µ‡∞°‡±ç‡∞°‡±Ä
            </button>
            <button id="btnCompound" onclick="setInterestType('compound')" class="flex-1 py-3 px-4 rounded-lg text-sm font-bold transition-all duration-200 text-gray-500 hover:text-gray-700">
                ‡∞ö‡∞ï‡±ç‡∞∞ ‡∞µ‡∞°‡±ç‡∞°‡±Ä
            </button>
        </div>

        <!-- Inputs Section -->
        <div class="space-y-5">
            
            <!-- Principal -->
            <div class="relative">
                <label class="block text-sm font-medium text-gray-700 mb-1 ml-1">
                    ‡∞Ö‡∞™‡±ç‡∞™‡±Å ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç (‡∞Ö‡∞∏‡∞≤‡±Å)
                </label>
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <span class="text-gray-400 text-lg font-bold">‚Çπ</span>
                    </div>
                    <input type="number" id="principal" placeholder="‡∞â‡∞¶‡∞æ: 10000" oninput="calculate()" class="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-lg font-semibold text-gray-800">
                </div>
            </div>

            <!-- Rate -->
            <div class="relative">
                <label class="block text-sm font-medium text-gray-700 mb-1 ml-1">
                    ‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞∞‡±á‡∞ü‡±Å (‡∞®‡±Ü‡∞≤‡∞ï‡±Å)
                </label>
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg class="text-gray-400" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" x2="5" y1="5" y2="19"/><circle cx="6.5" cy="6.5" r="2.5"/><circle cx="17.5" cy="17.5" r="2.5"/></svg>
                    </div>
                    <input type="number" id="rate" placeholder="‡∞â‡∞¶‡∞æ: 2" oninput="calculate()" class="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-lg font-semibold text-gray-800">
                </div>
            </div>

            <!-- Date Selection Section -->
            <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                <div class="grid grid-cols-2 gap-4">
                    <!-- Start Date -->
                    <div>
                        <label class="block text-xs font-medium text-blue-800 mb-1">
                            ‡∞Ö‡∞™‡±ç‡∞™‡±Å ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞® ‡∞§‡±á‡∞¶‡±Ä
                        </label>
                        <input type="date" id="startDate" onchange="calculate()" class="w-full p-2 bg-white border border-blue-200 rounded-lg text-sm font-semibold text-gray-700 focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>

                    <!-- End Date -->
                    <div>
                        <label class="block text-xs font-medium text-blue-800 mb-1">
                            ‡∞à ‡∞∞‡±ã‡∞ú‡±Å / ‡∞ï‡∞ü‡±ç‡∞ü‡±á ‡∞§‡±á‡∞¶‡±Ä
                        </label>
                        <input type="date" id="endDate" onchange="calculate()" class="w-full p-2 bg-white border border-blue-200 rounded-lg text-sm font-semibold text-gray-700 focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                </div>

                <!-- Duration Display -->
                <div id="durationText" class="mt-3 text-center text-sm font-bold text-blue-700 bg-white py-2 rounded-lg border border-blue-100 hidden">
                    <!-- Javascript will populate this -->
                </div>
            </div>

        </div>

        <!-- Reset Button -->
        <div class="flex justify-end">
            <button onclick="resetFields()" class="text-gray-500 hover:text-red-500 flex items-center text-sm font-medium transition-colors cursor-pointer">
                <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                ‡∞∞‡±Ä‡∞∏‡±Ü‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø
            </button>
        </div>

        <!-- Results Section -->
        <div id="resultCard" class="hidden bg-slate-800 rounded-2xl p-6 text-white shadow-lg animate-fade-in mt-4 relative overflow-hidden">
            <!-- Background Decoration -->
            <div class="absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-xl"></div>
            
            <h3 class="text-slate-400 text-xs font-bold uppercase tracking-widest mb-4 border-b border-slate-700 pb-2">
                ‡∞´‡∞≤‡∞ø‡∞§‡∞Ç (<span id="resultTypeLabel">‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£ ‡∞µ‡∞°‡±ç‡∞°‡±Ä</span>)
            </h3>
            
            <div class="space-y-4 relative z-10">
                <div class="flex justify-between items-end">
                    <span class="text-slate-300 text-sm">‡∞ï‡±á‡∞µ‡∞≤‡∞Ç ‡∞µ‡∞°‡±ç‡∞°‡±Ä:</span>
                    <span id="displayInterest" class="text-2xl font-bold text-yellow-400">‚Çπ0</span>
                </div>
                
                <div class="flex justify-between items-end pt-3 border-t border-slate-700">
                    <span class="text-slate-200 font-medium">‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞ï‡∞ü‡±ç‡∞ü‡∞æ‡∞≤‡±ç‡∞∏‡∞ø‡∞®‡∞¶‡∞ø:</span>
                    <span id="displayTotal" class="text-3xl font-bold text-green-400">‚Çπ0</span>
                </div>
            </div>

            <!-- WhatsApp Button -->
            <button onclick="shareOnWhatsApp()" class="w-full mt-6 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95 shadow-lg cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M16.93 16.93A8 8 0 0 1 12 20a8 8 0 0 1-5.66-2.34L3 21l3.34-3.34A8 8 0 0 1 5 12a8 8 0 0 1 8-8 8 8 0 0 1 8 8c0 2.12-.84 4.16-2.34 5.66z"/></svg>
                Share on WhatsApp
            </button>
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="text-center py-6 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200">
            <p class="text-gray-400 text-sm font-medium">‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞®‡∞ø‡∞Ç‡∞™‡∞ø‡∞§‡±á ‡∞´‡∞≤‡∞ø‡∞§‡∞Ç ‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞ï‡∞®‡∞ø‡∞™‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø.</p>
        </div>

    </div>

    <!-- JavaScript Logic -->
    <script>
        let currentType = 'simple';

        // Set default End Date to Today
        window.onload = function() {
            document.getElementById('endDate').valueAsDate = new Date();
        };

        function setInterestType(type) {
            currentType = type;
            const btnSimple = document.getElementById('btnSimple');
            const btnCompound = document.getElementById('btnCompound');

            if (type === 'simple') {
                btnSimple.className = "flex-1 py-3 px-4 rounded-lg text-sm font-bold transition-all duration-200 bg-white text-blue-700 shadow-md";
                btnCompound.className = "flex-1 py-3 px-4 rounded-lg text-sm font-bold transition-all duration-200 text-gray-500 hover:text-gray-700";
            } else {
                btnSimple.className = "flex-1 py-3 px-4 rounded-lg text-sm font-bold transition-all duration-200 text-gray-500 hover:text-gray-700";
                btnCompound.className = "flex-1 py-3 px-4 rounded-lg text-sm font-bold transition-all duration-200 bg-white text-purple-700 shadow-md";
            }
            calculate();
        }

        function calculate() {
            const principal = parseFloat(document.getElementById('principal').value);
            const rate = parseFloat(document.getElementById('rate').value);
            const startDateVal = document.getElementById('startDate').value;
            const endDateVal = document.getElementById('endDate').value;

            const resultCard = document.getElementById('resultCard');
            const emptyState = document.getElementById('emptyState');
            const durationText = document.getElementById('durationText');

            if (!principal || !rate || !startDateVal || !endDateVal) {
                resultCard.classList.add('hidden');
                emptyState.classList.remove('hidden');
                durationText.classList.add('hidden');
                return;
            }

            // Date Calculation Logic
            const start = new Date(startDateVal);
            const end = new Date(endDateVal);

            if (end < start) {
                durationText.innerHTML = "<span class='text-red-500'>‡∞§‡±á‡∞¶‡±Ä ‡∞∏‡∞∞‡∞ø‡∞ó‡±ç‡∞ó‡∞æ ‡∞≤‡±á‡∞¶‡±Å (End date before Start date)</span>";
                durationText.classList.remove('hidden');
                resultCard.classList.add('hidden');
                return;
            }

            // Calculate exact Y-M-D difference
            let years = end.getFullYear() - start.getFullYear();
            let months = end.getMonth() - start.getMonth();
            let days = end.getDate() - start.getDate();

            if (days < 0) {
                months--;
                // Get days in previous month
                const prevMonth = new Date(end.getFullYear(), end.getMonth(), 0);
                days += prevMonth.getDate();
            }
            if (months < 0) {
                years--;
                months += 12;
            }

            // --- SMART TELUGU TEXT LOGIC ---
            let durationString = "";

            // Years Logic
            if (years > 0) {
                if (years === 1) {
                    durationString += "1 ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞Ç "; 
                } else {
                    if (months > 0 || days > 0) {
                        durationString += `${years} ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞æ‡∞≤ `;
                    } else {
                        durationString += `${years} ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞æ‡∞≤‡±Å`;
                    }
                }
            }

            // Months Logic
            if (months > 0) {
                durationString += `${months} ‡∞®‡±Ü‡∞≤‡∞≤‡±Å `;
            }

            // Days Logic
            if (days > 0) {
                durationString += `${days} ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±Å`;
            }

            if (durationString.trim() === "") durationString = "0 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±Å (‡∞à ‡∞∞‡±ã‡∞ú‡±á ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞∞‡±Å)";

            durationText.innerText = durationString;
            durationText.classList.remove('hidden');

            // Calculate Total Months for Formula (Village Style: Days / 30)
            const totalMonths = (years * 12) + months + (days / 30);

            let interest = 0;
            let totalAmount = 0;

            if (currentType === 'simple') {
                interest = (principal * rate * totalMonths) / 100;
                totalAmount = principal + interest;
            } else {
                totalAmount = principal * Math.pow((1 + rate / 100), totalMonths);
                interest = totalAmount - principal;
            }

            resultCard.classList.remove('hidden');
            emptyState.classList.add('hidden');

            document.getElementById('resultTypeLabel').innerText = currentType === 'simple' ? '‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£ ‡∞µ‡∞°‡±ç‡∞°‡±Ä' : '‡∞ö‡∞ï‡±ç‡∞∞ ‡∞µ‡∞°‡±ç‡∞°‡±Ä';
            document.getElementById('displayInterest').innerText = formatCurrency(interest);
            document.getElementById('displayTotal').innerText = formatCurrency(totalAmount);
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                maximumFractionDigits: 0
            }).format(amount);
        }

        // Helper to format Date nicely (DD/MM/YYYY)
        function formatDateForShare(dateStr) {
            if (!dateStr) return '';
            const parts = dateStr.split('-');
            return `${parts[2]}/${parts[1]}/${parts[0]}`;
        }

        function shareOnWhatsApp() {
            const principal = document.getElementById('principal').value;
            const rate = document.getElementById('rate').value;
            const duration = document.getElementById('durationText').innerText;
            const interestText = document.getElementById('displayInterest').innerText;
            const totalText = document.getElementById('displayTotal').innerText;
            const typeText = currentType === 'simple' ? '‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£ ‡∞µ‡∞°‡±ç‡∞°‡±Ä' : '‡∞ö‡∞ï‡±ç‡∞∞ ‡∞µ‡∞°‡±ç‡∞°‡±Ä';
            
            const startDateVal = document.getElementById('startDate').value;
            const endDateVal = document.getElementById('endDate').value;
            
            const formattedStart = formatDateForShare(startDateVal);
            const formattedEnd = formatDateForShare(endDateVal);

            if (!principal) return;

            const message = `
*‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞≤ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å:*
------------------------
üí∞ *‡∞Ö‡∞™‡±ç‡∞™‡±Å:* ‚Çπ${principal}
üìä *‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞∞‡±á‡∞ü‡±Å:* ‡∞®‡±Ü‡∞≤‡∞ï‡±Å ${rate} ‡∞∞‡±Ç‡∞™‡∞æ‡∞Ø‡∞ø‡∞≤‡±Å
üìÖ *‡∞ï‡∞æ‡∞≤‡∞Ç:* ${duration}
üóì *‡∞§‡±á‡∞¶‡±Ä‡∞≤‡±Å:* ${formattedStart} ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ${formattedEnd} ‡∞µ‡∞∞‡∞ï‡±Å
üîÑ *‡∞™‡∞¶‡±ç‡∞ß‡∞§‡∞ø:* ${typeText}
------------------------
üìà *‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞µ‡∞°‡±ç‡∞°‡±Ä:* ${interestText}
üíµ *‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞ï‡∞ü‡±ç‡∞ü‡∞æ‡∞≤‡±ç‡∞∏‡∞ø‡∞® ‡∞°‡∞¨‡±ç‡∞¨‡±Å:* ${totalText}
------------------------
_Generated by Interest Calculator App_
            `.trim();

            window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');
        }

        function resetFields() {
            document.getElementById('principal').value = '';
            document.getElementById('rate').value = '';
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').valueAsDate = new Date();
            calculate();
        }
    </script>
</body>
</html>

